{% if not queries %}
<h5>no queries found</h5>
{% else %}

    <div class="container collapse show" id="queries" >
        <table class="table table-responsive">
            <thead class="thead-dark"><h2>Queries</h2>
                <tr>
                    {% for key in queries[0].json().keys() %}
                        <th>{{key}}</th>
                    {% endfor %}
                </tr>
            </thead>

            {% for query in queries %}
            <tr>
                {% for item in query.json() %}
                    {% if query.json()["joins"]==True and (item == "source" or item == "joins")%}
                        <td><span class="badge badge-warning">{{query.json()[item]}}</span></td>
                    {% else %}
            <td>{{query.json()[item]}}</td>
                    {% endif %}

                {% endfor %}
                     <td class="body" style="border: none"><button type="button" class="btn btn-primary" data-toggle="modal" data-target="#{{query.name | replace(' ','') }}"><i class="fa fa-info-circle"></i></button></td>
            </tr>

            {% endfor %}

        </table>
    </div>


        {% for query in queries %}

<div class="modal" id="{{ query.name | replace(' ','') }}" tabindex="-1" role="dialog" aria-labelledby="{{query.name}}" aria-hidden="true">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="{{query.name}}">Selection</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div>
            <table class="table"><h3>{{query.name}}</h3>
                <thead class="thead-dark">
                <tr>
                    {% for key in query.dataItems[0].json().keys() %}
                    <th>{{key}}</th>
                    {% endfor %}
                </tr>
                </thead>
                {% for dataItem in query.dataItems %}
                    <tr>
                    {% for key in dataItem.json() %}
                        <td>
                        {% if key=='expression' %}
                            <samp class="expression">{{dataItem.json()[key]}}</samp>
                        {% else %}
                        {{dataItem.json()[key]}}
                        {% endif %}
                        </td>
                    {% endfor %}
                    </tr>
                {% endfor %}
            </table>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>


        {% endfor %}

{% endif %}